# ЗЭВЭЗЭ (The weather)

### Краткое описание проекта

Django-проект на Python. Разработка проекта ведется в целях закрепления и развития навыков владения Python, бэкенд на Django, API. Сайт предоставляет метеорологические данные по ip-адресу пользователя с небольшой примесью юмора.
Расчитан на аудиторию, проживающую на территории РФ.
Проект включает в себя предоставление основных метеоданных на текущий момент времени с учетом часового пояса, прогноз на ближайшие 5 дней как сжатый, так и подробный. Главная страница содержит колонку с 2-мя случайными анекдотами, взятых с сайта https://allanecdots.ru/.

### Примененные технологии

Технологии, примененные при создании проекта, приведены в файле requirements.txt. Прямая ссылка - https://github.com/Skakovsku/weather/blob/master/requirements.txt
Метеорологические данные запрашиваются GET-запросом с указанием координат или названия города на сайте https://openweathermap.org/. Полученные данные в формате JSON обрабатываются и отправляются в виде переменных CONTEXT в HTML-шаблон.
Город определяется автоматически путем API-запроса с указанием IP-адреса к сервису https://dadata.ru/ с использованием библиотеки Dadata.
IP-адрес определяется также автоматически, используя данные META запроса пользователя.
При ошибке определения данных местонахождения пользователя либо при невозможности определить город автоматически, предусмотрена возможность ручного ввода названия города посредством форм Django.
Контент колонки юмора (анекдоты) генерируется скриптом, предоставленным сайтом https://allanecdots.ru/. Скрипт включен в базовый шаблон проекта.

### Установка проекта на локальном компьютере
Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/Skakovsku/weather
```
Перейти в корневую папку склонированного проекта:
```
cd weather
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv env
```
```
source venv/bin/activate
```

Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

Далее необходимо сгенерировать секретный ключ Django. Для этого при активированном виртуальном окружении в терминале введите следующую команду:

```
(venv) $ python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
```
Создайте в директории yatube/yatube/ (в одной папке с файлом settings.py) файл с именем .env со следующим содержимым:
```
SECRET_KEY=сгенерированный_ключ
```
Информацию следует печатать без кавычек, скобок и пробелов.

Выполнить миграции:

```
python3 manage.py migrate
```

#### Важно! Получение токенов
Для запуска проекта необходимо получить токены с сервисов https://openweathermap.org/ и https://dadata.ru/.

##### Openweathermap
После регистрации на сайте станет доступна вкладка API keys, где можно сгенерировать необходимый токен.

##### Dadata
Токен для API-запросов станет доступен сразу после регистрации.

Создайте файл с именем .env в директории weather/weathers_content/ со следующим содержимым:
```
token_weather=токен_openweathermap
token_town=токен Dadata
```
Информацию следует печатать без кавычек, скобок и пробелов.

##### Теперь все готово к запуску.
Запустить проект на локальном рабочем сервере:

```
python3 manage.py runserver
```
